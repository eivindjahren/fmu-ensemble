

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fmu.ensemble.util package &mdash; fmu-ensemble 1.4.3.dev1+gd4bca3b documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing" href="contributing.html" />
    <link rel="prev" title="fmu.ensemble package" href="fmu.ensemble.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> fmu-ensemble
          

          
            
            <img src="_static/equinor-logo2.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4.3.dev1+gd4bca3b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">Introduction to <em>fmu.ensemble</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts in fmu-ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="advancedusage.html">Advanced usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API for fmu.ensemble</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="fmu.html">fmu package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="fmu.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="fmu.ensemble.html">fmu.ensemble package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="fmu.html#module-fmu">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fmu-ensemble</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">API for fmu.ensemble</a> &raquo;</li>
        
          <li><a href="fmu.html">fmu package</a> &raquo;</li>
        
          <li><a href="fmu.ensemble.html">fmu.ensemble package</a> &raquo;</li>
        
      <li>fmu.ensemble.util package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/fmu.ensemble.util.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fmu-ensemble-util-package">
<h1>fmu.ensemble.util package<a class="headerlink" href="#fmu-ensemble-util-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-fmu.ensemble.util.dates">
<span id="fmu-ensemble-util-dates-module"></span><h2>fmu.ensemble.util.dates module<a class="headerlink" href="#module-fmu.ensemble.util.dates" title="Permalink to this headline">¶</a></h2>
<p>Common utility functions used in fmu.ensemble</p>
<dl class="py data">
<dt id="fmu.ensemble.util.dates.logger">
<code class="sig-prename descclassname">fmu.ensemble.util.dates.</code><code class="sig-name descname">logger</code><em class="property"> = &lt;Logger fmu.ensemble.util.dates (WARNING)&gt;</em><a class="headerlink" href="#fmu.ensemble.util.dates.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Mapping from fmu-ensemble custom offset strings to Pandas DateOffset strings.
See
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects</a></p>
</dd></dl>

<dl class="py function">
<dt id="fmu.ensemble.util.dates.date_range">
<code class="sig-prename descclassname">fmu.ensemble.util.dates.</code><code class="sig-name descname">date_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em>, <em class="sig-param"><span class="n">freq</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util/dates.html#date_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.dates.date_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for pandas.date_range to allow for extra fmu-ensemble specific mnemonics
‘yearly’, ‘daily’, ‘weekly’, mapped over to pandas DateOffsets</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_date</strong> (<em>datetime.date</em>) – </p></li>
<li><p><strong>end_date</strong> (<em>datetime.date</em>) – </p></li>
<li><p><strong>freq</strong> (<em>str</em>) – monthly, daily, weekly, yearly, or a Pandas date offset
frequency.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of datetimes</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fmu.ensemble.util.dates.unionize_smry_dates">
<code class="sig-prename descclassname">fmu.ensemble.util.dates.</code><code class="sig-name descname">unionize_smry_dates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eclsumsdates</span></em>, <em class="sig-param"><span class="n">freq</span></em>, <em class="sig-param"><span class="n">normalize</span></em>, <em class="sig-param"><span class="n">start_date</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">end_date</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util/dates.html#unionize_smry_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.dates.unionize_smry_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Unionize lists of dates into one datelist encompassing the date
range from all datelists, with cropping, resampling to wanted
frequency, and potential normalized dates to the frequency (rollback/rollforward)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>eclsumsdates</strong> (<em>list of lists of datetimes</em>) – </p></li>
<li><p><strong>freq</strong> (<em>str</em>) – Requested frequency</p></li>
<li><p><strong>normalize</strong> (<em>bool</em>) – Normalize daterange to frequency or not.</p></li>
<li><p><strong>start_date</strong> (<em>datetime.date</em><em> or </em><em>str</em>) – Overridden if freq==’first’</p></li>
<li><p><strong>end_date</strong> (<em>datetime.date</em><em> or </em><em>str</em>) – Overridden if freq==’last’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of datetime.date</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fmu.ensemble.util.dates.normalize_dates">
<code class="sig-prename descclassname">fmu.ensemble.util.dates.</code><code class="sig-name descname">normalize_dates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_date</span></em>, <em class="sig-param"><span class="n">end_date</span></em>, <em class="sig-param"><span class="n">freq</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util/dates.html#normalize_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.dates.normalize_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize start and end date according to frequency
by extending the time range.</p>
<p>So for [1997-11-5, 2020-03-02] and monthly freqency
this will transform your dates to
[1997-11-1, 2020-04-01]</p>
<p>For yearly frequency will be [1997-01-01, 2021-01-01].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_date</strong> – datetime.date</p></li>
<li><p><strong>end_date</strong> – datetime.date</p></li>
<li><p><strong>freq</strong> – string with either ‘monthly’, ‘yearly’, ‘weekly’
or any other frequency offset accepted by Pandas</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of normalized (start_date, end_date)</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-fmu.ensemble.util.rates">
<span id="fmu-ensemble-util-rates-module"></span><h2>fmu.ensemble.util.rates module<a class="headerlink" href="#module-fmu.ensemble.util.rates" title="Permalink to this headline">¶</a></h2>
<p>Common utility functions for rates used in fmu.ensemble</p>
<dl class="py function">
<dt id="fmu.ensemble.util.rates.compute_volumetric_rates">
<code class="sig-prename descclassname">fmu.ensemble.util.rates.</code><code class="sig-name descname">compute_volumetric_rates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">realization</span></em>, <em class="sig-param"><span class="n">column_keys</span></em>, <em class="sig-param"><span class="n">time_index</span></em>, <em class="sig-param"><span class="n">time_unit</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util/rates.html#compute_volumetric_rates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.rates.compute_volumetric_rates" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute volumetric rates from cumulative summary vectors</p>
<p>Column names that are not referring to cumulative summary
vectors are silently ignored.</p>
<p>A Dataframe is returned with volumetric rates, that is rate
values that can be summed up to the cumulative version. The
‘T’ in the column name is switched with ‘R’. If you ask for
FOPT, you will get FOPR in the returned dataframe.</p>
<p>Rates in the returned dataframe are valid <strong>forwards</strong> in time,
opposed to rates coming directly from the Eclipse simulator which
are valid backwards in time.</p>
<p>If time_unit is set, the rates will be scaled to represent
either daily, monthly or yearly rates. These will sum up to the
cumulative as long as you multiply with the correct number
of days, months or year between each consecutive date index.
Month lengths and leap years are correctly handled.</p>
<p>The returned dataframe is indexed by DATE.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>realization</strong> (<a class="reference internal" href="fmu.ensemble.html#fmu.ensemble.realization.ScratchRealization" title="fmu.ensemble.realization.ScratchRealization"><em>ScratchRealization</em></a><em> or </em><a class="reference internal" href="fmu.ensemble.html#fmu.ensemble.virtualrealization.VirtualRealization" title="fmu.ensemble.virtualrealization.VirtualRealization"><em>VirtualRealization</em></a>) – The realization
object containing rates to compute from.</p></li>
<li><p><strong>column_keys</strong> – str or list of strings, cumulative summary vectors</p></li>
<li><p><strong>time_index</strong> – str or list of datetimes</p></li>
<li><p><strong>time_unit</strong> – str or None. If None, the rates returned will
be the difference in cumulative between each included
time step (where the time interval can vary arbitrarily)
If set to ‘days’, ‘months’ or ‘years’, the rates will
be scaled to represent a daily, monthly or yearly rate that
is compatible with the date index and the cumulative data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dataframe indexed by DATE with cumulative columns.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fmu.ensemble.util.rates.cumcolumn_to_ratecolumn">
<code class="sig-prename descclassname">fmu.ensemble.util.rates.</code><code class="sig-name descname">cumcolumn_to_ratecolumn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">smrycolumn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util/rates.html#cumcolumn_to_ratecolumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.rates.cumcolumn_to_ratecolumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a cumulative summary column name to the
corresponding rate column name.</p>
<p>Returns None if the input summary column name
is not assumed to be cumulative.</p>
<p>Example: “FOPT” will be mapped to “FOPR”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>smrycolumn</strong> (<em>str</em>) – Name of summary vector/column</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rate column or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-fmu.ensemble.util">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-fmu.ensemble.util" title="Permalink to this headline">¶</a></h2>
<p>Common utility functions used in fmu.ensemble</p>
<dl class="py function">
<dt id="fmu.ensemble.util.flatten">
<code class="sig-prename descclassname">fmu.ensemble.util.</code><code class="sig-name descname">flatten</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dictionary</span></em>, <em class="sig-param"><span class="n">parent_key</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">'_'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util.html#flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten nested dictionaries by introducing new keys
with the accumulated path.</p>
<p>e.g. {“foo”: {“bar”: “com”}} becomes {“foo-bar”: “com”}</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dictionary</strong> (<em>dict</em>) – Possibly nested dictionary</p></li>
<li><p><strong>parent_key</strong> (<em>str</em>) – If provided, append as top level key</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – Separator used in merged keys.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict with only one level.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fmu.ensemble.util.parse_number">
<code class="sig-prename descclassname">fmu.ensemble.util.</code><code class="sig-name descname">parse_number</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util.html#parse_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.parse_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to parse the string first as an integer, then as float,
if both fails, return the original string.</p>
<p>Caveats: Know your Python numbers:
<a class="reference external" href="https://stackoverflow.com/questions/379906/how-do-i-parse-a-string-to-a-float-or-int-in-python">https://stackoverflow.com/questions/379906/how-do-i-parse-a-string-to-a-float-or-int-in-python</a></p>
<p>Beware, this is a minefield.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>int, float or string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="fmu.ensemble.util.shortcut2path">
<code class="sig-prename descclassname">fmu.ensemble.util.</code><code class="sig-name descname">shortcut2path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em>, <em class="sig-param"><span class="n">shortpath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fmu/ensemble/util.html#shortcut2path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fmu.ensemble.util.shortcut2path" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert short pathnames to fully qualified pathnames
within the datastore.</p>
<p>If the fully qualified localpath is</p>
<blockquote>
<div><p>‘share/results/volumes/simulator_volume_fipnum.csv’</p>
</div></blockquote>
<p>then you can also access this with these alternatives:</p>
<blockquote>
<div><ul class="simple">
<li><p>simulator_volume_fipnum</p></li>
<li><p>simulator_volume_fipnum.csv</p></li>
<li><p>share/results/volumes/simulator_volume_fipnum</p></li>
</ul>
</div></blockquote>
<p>but only as long as there is no ambiguity. In case
of ambiguity, the shortpath will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list of str</em>) – List if all keys in the internal datastore</p></li>
<li><p><strong>shortpath</strong> (<em>str</em>) – The search string, the short pathname that
should resolve to a fully qualified localpath</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fully qualified path if found in keys, returns the shortpath
input untouched if nothing is found, or of the shortpath is
already fully qualified.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="fmu.ensemble.html" class="btn btn-neutral float-left" title="fmu.ensemble package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Equinor

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #ff1243;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #474747;
    }
    .wy-side-nav-search > div.version {
      color: white;
￼   }
  </style>


</body>
</html>